

# 生命周期

您可以通过开通存储空间（Bucket）生命周期功能，实现存储空间内所有文件或特定前缀文件的生命周期管理（可以配置一个或者多个规则），设置生命周期规则转换存储类型或删除文件操作。

* 删除文件：支持设置指定的文件在 N 天后被自动删除。

* 转低频存储：可以设置指定的文件在 N 天后，自动转换成低频存储类型。

* 转归档存储：可以设置指定的文件在 N 天后，自动转换成归档存储类型。

使用说明：类型转换和删除文件操作的开始时间是如何计算的呢？US3将对象上传时间与设置天数相加，得到的时间入到后一天的午夜（CST: 中国标准时间），从而得到对象操作开始时间。例如对象在 2015年1月1日 上午 10:00 CST 上传，设置在 3 天后被删除，那么会在 2015年1月5日 00:00 CST 之后当天内删除文件。
**注：设置生命周期规则后，当天晚上会执行生命周期操作，删除操作不可恢复，请谨慎设置。如一个文件为用户在 31 天前上传，用户配置了生命周期规则为删除 30 天前的文件，则 US3 服务在生命周期规则被设置的当晚会自动执行删除该文件的操作。**

## 使用场景

通过生命周期规则，您可以更高效的管理您存储的数据，节省大量人力及存储成本。您可以通过设置匹配特定前缀的规则，定期将非热门数据转换为低频访问或归档存储，将不再需要访问的数据删除。例如：

1. 监控视频上传，根据相关条例，监控保存时间一般规定如下：一般小区的是7天；一般娱乐场所是 15 天；金融行业是 26 天；银行 3 个月到半年。可以通过设置生命周期规则，上传的文件，会在匹配规则命中后，根据上传时间，到达指定天数后自动过期删除，从而减少存储量，降低成本。

2. 电子公文类数据，根据相关条例，需要长期保存达 10 年，超过 1 年的电子公文调阅次数减少，超过 3 年的电子公文通常不再被调阅。可以通过设置生命周期规则，上传的文件，会在匹配规则命中后，根据上传时间，到达指定天数后自动转低频、归档存储，从而降低存储的单位成本。

## 注意事项

1. 存储空间的生命周期功能一旦开启，对存储空间内所有符合规则范围的文件生效（包括开启生命周期功能前上传的文件），并于后一天的 00:00 触发生命周期规则，请确认无误后再保存生命周期规则。

2. 删除文件的操作是不可逆的，请根据您的需求合理设置生命周期规则，避免重要数据丢失。

## 管理生命周期

选择对应空间，在右侧操作中选择生命周期按钮。

![](/images/guide/管理生命周期1.png)

点击添加规则按钮。

![](/images/生命周期2.png)

添加生命周期规则界面。

![](/images/guide/添加生命周期规则.png)

|字段   |说明   |
|---- |---- |
|规则名称  |用户可以设置一个规则名称，记录自己创建的规则。|
|规则范围  |指定规则的生效范围，选择整个存储空间时，生命周期规则对整个存储空间生效；<br>选择指定目录时，仅对该存储空间下的指定目录生效。|
|规则内容  |选择需要执行的生命周期规则和规则的触发时间，最小为 7 天，具体计算方式请参考备注说明。|

生命周期规则添加完成后默认生效，生效状态具体可见状态栏，您可以通过操作栏下的其他按钮，进行相应的修改以及关闭操作。

![](/images/生命周期3.png)

点击禁用或者删除按钮以后，状态修改在第二天生效，不影响当天 00:00 已触发但未执行完成的任务继续执行。

## 备注

1. 低频存储和归档存储类型都有最短存储期限，早于最短存储期限删除、修改、覆盖文件，需要补足未满最短存储期限的剩余天数的存储费用。

2. 生命周期规则的自动操作触发时间是如何计算的呢？US3 将文件上传时间与设置天数相加，计算得到时间的后一天的00:00（CST: 中国标准时间）即为自动操作开始时间。例如文件在 2015年1月1日 上午 10:00 CST 上传，设置在 3 天后被删除，那么会在 2015年1月5日 00:00 CST 后触发自动删除文件操作。

3. 当前仅北京、广州、上海二、新加坡地域支持生命周期功能，其他地域后续支持。
